<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>User Details</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-100">

    <div class="container py-5">

        <div class="card shadow-lg p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="text-danger fw-bold">User Details</h3>

                <select id="roleSelect" class="form-select w-auto" onchange="filterUsers()">
                    <option value="">Select Role</option>
                    <option value="depot">Depot Manager</option>
                    <option value="conductor">Bus Conductor</option>
                    <option value="tourister">Tourister</option>
                </select>
            </div>

            <div id="errorMsg" class="text-danger mb-3 fw-semibold" style="display:none;">
                ‚ùå Please select a valid role!
            </div>

            <table class="table table-hover">
                <thead class="bg-light">
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Date Joined</th>
                    </tr>
                </thead>

                <tbody id="userTable">
                    <!-- Data will load dynamically -->
                </tbody>

            </table>

            <p id="noDataMsg" class="text-center text-muted" style="display:none;">No users found</p>

        </div>
    </div>


    <!-- JS Section -->
    <script>
        const usersData = {
            depot: [
                { username: "dm_rahul", email: "rahul@gmail.com", joined: "2024-03-21" },
                { username: "dm_anu", email: "anu@gmail.com", joined: "2024-01-10" }
            ],
            conductor: [
                { username: "con_jijo", email: "jijo@gmail.com", joined: "2024-02-15" }
            ],
            tourister: []
        };

        function filterUsers() {
            const role = document.getElementById("roleSelect").value;
            const tableBody = document.getElementById("userTable");
            const noData = document.getElementById("noDataMsg");
            const error = document.getElementById("errorMsg");

            tableBody.innerHTML = "";
            error.style.display = "none";
            noData.style.display = "none";

            if (!role) {
                error.style.display = "block";
                return;
            }

            const users = usersData[role];

            if (users.length === 0) {
                noData.style.display = "block";
                return;
            }

            users.forEach(user => {
                tableBody.innerHTML += `
                    <tr>
                        <td>${user.username}</td>
                        <td>${user.email}</td>
                        <td>${user.joined}</td>
                    </tr>
                `;
            });
        }
    </script>

</body>
</html>
