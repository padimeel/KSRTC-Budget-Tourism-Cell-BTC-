<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KSRTC BTC — Package Details</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>

  <body
    class="bg-gradient-to-br from-rose-50 to-amber-50 min-h-screen text-gray-800"
  >
    {% include 'components/navbar.html' %}

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-8">
      <!-- Package Image + Title -->
      <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Images -->
        <div class="space-y-4">
          <img
            id="mainImage"
            class="w-full h-80 object-cover rounded-xl shadow"
          />
          <div class="grid grid-cols-3 gap-3">
            <img
              id="image1"
              class="h-24 w-full object-cover rounded-lg shadow"
            />
            <img
              id="image2"
              class="h-24 w-full object-cover rounded-lg shadow"
            />
            <img
              id="image3"
              class="h-24 w-full object-cover rounded-lg shadow"
            />
          </div>
        </div>

        <!-- Package Info -->
        <div class="space-y-4">
          <h2 id="packageName" class="text-3xl font-bold text-rose-600"></h2>
          <p id="overview" class="text-gray-600 leading-relaxed"></p>

          <div class="grid grid-cols-2 gap-4 items-stretch">
            <div
              class="p-4 bg-white rounded-lg shadow text-sm h-25 flex flex-col justify-between"
            >
              <p class="font-semibold text-gray-700">Duration</p>
              <p id="duration" class="text-rose-600 font-bold text-xl"></p>
            </div>

            <div
              class="p-4 bg-white rounded-lg shadow text-sm h-25 flex flex-col justify-between"
            >
              <p class="font-semibold text-gray-700">Starting From</p>
              <p id="price" class="text-rose-600 font-bold text-3xl"></p>
              <span class="text-xs text-black"
                >(Below 12 years - 50% discount)</span
              >
            </div>

            <div
              class="p-4 bg-white rounded-lg shadow text-sm h-25 flex flex-col justify-between"
            >
              <p class="font-semibold text-gray-700">Bus Type</p>
              <p class="text-rose-600 font-bold text-xl">AC Volvo</p>
            </div>

            <div
              class="p-4 bg-white rounded-lg shadow text-sm h-25 flex flex-col justify-between"
            >
              <p class="font-semibold text-gray-700">Available Seats</p>
              <p class="text-rose-600 font-bold text-xl">42 left</p>
            </div>
          </div>

          <div class="pt-3">
            <div class="flex justify-center">
              <a
                id="bookBtn"
                href="#"
                class="w-40 inline-block text-center bg-gradient-to-r from-rose-600 to-amber-400 text-white  py-2 rounded-lg font-bold shadow hover:opacity-90"
              >
                BOOK NOW
              </a>
            </div>
          </div>
        </div>
      </section>

     
<!-- Booking Popup -->



      <!-- Itinerary -->
      <section class="mt-10 bg-white p-6 rounded-xl shadow w-full">
        <h3
          class="text-xl font-bold text-white bg-rose-600 px-4 py-3 rounded-t-lg overflow-hidden shadow -mx-6 -mt-6 mb-6"
        >
          Itinerary
        </h3>

        <div class="space-y-6 text-sm text-gray-700" id="itineraryContainer">
          
        </div>
      </section>

    
    </main> 

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
    // 1️⃣ Get package_id from URL
    const urlParams = new URLSearchParams(window.location.search);
    const packageId = urlParams.get("id");

    console.log("Package ID:", packageId);

    // 2️⃣ Fetch Package Details
    axios
        .get(`http://127.0.0.1:8000/admin_site/packages/${packageId}/`)
        .then((response) => {
            const data = response.data;

            // Images
            document.getElementById("mainImage").src = data.image1;
            document.getElementById("image1").src = data.image1;
            document.getElementById("image2").src = data.image2;
            document.getElementById("image3").src = data.image3;

            // Package details
            document.getElementById("packageName").innerText = data.package_name;
            document.getElementById("overview").innerText = data.package_overview;
            document.getElementById("duration").innerText = data.duration;

            document.getElementById("price").innerHTML =
                `₹ ${data.price} <span class='text-sm italic font-normal text-black'>Per Person</span>`;

            // If Booking price element exists
            const bookingPrice = document.getElementById("Booking_price");
            if (bookingPrice) {
                bookingPrice.innerHTML = `&#8377; ${data.price}`;
            }

            // Itinerary
            const itineraryDiv = document.getElementById("itineraryContainer");
            itineraryDiv.innerHTML = "";

            data.itineraries.forEach((item) => {
                itineraryDiv.innerHTML += `
                    <div class="flex items-start gap-4 border p-3 border-gray-300 rounded-md">
                        <div class="h-10 w-10 flex items-center justify-center rounded-full bg-rose-600 text-white font-bold shadow">
                            ${item.day_number}
                        </div>
                        <div>
                            <h4 class="font-semibold text-rose-600">${item.title}</h4>
                            <p>${item.description}</p>
                        </div>
                    </div>
                `;
            });
        })
        .catch((error) => {
            console.error("Error fetching package details:", error);
        });

    // 3️⃣ BOOK NOW Button Redirect
document.getElementById("bookBtn").addEventListener("click", function () {
    window.location.href = `/tourister/package_booking_frontend/?package_id=${packageId}`;

});


</script>


    {% include 'components/footer.html' %}
  </body>
</html>
